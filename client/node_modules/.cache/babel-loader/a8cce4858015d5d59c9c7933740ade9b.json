{"ast":null,"code":"import { invariant } from \"../../utilities/globals/index.js\";\nimport * as React from 'react';\nimport { canUseLayoutEffect } from \"../../utilities/index.js\";\nvar didWarnUncachedGetSnapshot = false;\nvar uSESKey = \"useSyncExternalStore\";\nvar realHook = React[uSESKey];\nexport var useSyncExternalStore = realHook || function (subscribe, getSnapshot, getServerSnapshot) {\n  var value = getSnapshot();\n  if (__DEV__ && !didWarnUncachedGetSnapshot && value !== getSnapshot()) {\n    didWarnUncachedGetSnapshot = true;\n    __DEV__ && invariant.error('The result of getSnapshot should be cached to avoid an infinite loop');\n  }\n  var _a = React.useState({\n      inst: {\n        value: value,\n        getSnapshot: getSnapshot\n      }\n    }),\n    inst = _a[0].inst,\n    forceUpdate = _a[1];\n  if (canUseLayoutEffect) {\n    React.useLayoutEffect(function () {\n      Object.assign(inst, {\n        value: value,\n        getSnapshot: getSnapshot\n      });\n      if (checkIfSnapshotChanged(inst)) {\n        forceUpdate({\n          inst: inst\n        });\n      }\n    }, [subscribe, value, getSnapshot]);\n  } else {\n    Object.assign(inst, {\n      value: value,\n      getSnapshot: getSnapshot\n    });\n  }\n  React.useEffect(function () {\n    if (checkIfSnapshotChanged(inst)) {\n      forceUpdate({\n        inst: inst\n      });\n    }\n    return subscribe(function handleStoreChange() {\n      if (checkIfSnapshotChanged(inst)) {\n        forceUpdate({\n          inst: inst\n        });\n      }\n    });\n  }, [subscribe]);\n  return value;\n};\nfunction checkIfSnapshotChanged(_a) {\n  var value = _a.value,\n    getSnapshot = _a.getSnapshot;\n  try {\n    return value !== getSnapshot();\n  } catch (_b) {\n    return true;\n  }\n}","map":null,"metadata":{},"sourceType":"module"}